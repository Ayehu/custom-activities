<?xml version="1.0" encoding="utf-16"?>
<ActivityExportMetadata>
  <ActivityMetadata>
    <Name>MGSGetToken</Name>
    <Label>MGS Get Token</Label>
    <Color>#EF712F</Color>
    <Description>Get a token</Description>
    <HelpHtml>&lt;p&gt; &lt;/p&gt;</HelpHtml>
  </ActivityMetadata>
  <ActivityGroupMetadata>
    <Label>Moogsoft</Label>
    <LabelKey>MOOGSOFT</LabelKey>
    <Icon>fa-wrench</Icon>
    <Color>#EF712F</Color>
    <Description>custom</Description>
  </ActivityGroupMetadata>
  <ActivitySourceMetadata>
    <SourceCode>&lt;Activity&gt;
  &lt;Name&gt;MGSGetToken&lt;/Name&gt;
  &lt;Version&gt;1.0.0.25&lt;/Version&gt;
  &lt;Platform&gt;Windows&lt;/Platform&gt;
  &lt;SourceType&gt;Executor&lt;/SourceType&gt;
  &lt;SourceCodeType&gt;CSHARP&lt;/SourceCodeType&gt;
  &lt;Enc&gt;False&lt;/Enc&gt;
  &lt;Remark /&gt;
  &lt;RequiresMap&gt;False&lt;/RequiresMap&gt;
  &lt;GlobalMemoryRequests /&gt;
  &lt;Assemblies&gt;
    &lt;Assembly type="0"&gt;System.XML.dll&lt;/Assembly&gt;
    &lt;Assembly type="0"&gt;System.Data.dll&lt;/Assembly&gt;
    &lt;Assembly type="0"&gt;System.dll&lt;/Assembly&gt;
    &lt;Assembly type="0"&gt;System.Web.dll&lt;/Assembly&gt;
    &lt;Assembly type="0"&gt;System.Net.Http.dll&lt;/Assembly&gt;
  &lt;/Assemblies&gt;
  &lt;SourceCode&gt;dXNpbmcgU3lzdGVtOwp1c2luZyBBeWVodS5TZGsuQWN0aXZpdHlDcmVhdGlvbi5JbnRlcmZhY2VzOwp1c2luZyBBeWVodS5TZGsuQWN0aXZpdHlDcmVhdGlvbi5FeHRlbnNpb247CnVzaW5nIEF5ZWh1LlNkay5BY3Rpdml0eUNyZWF0aW9uLkhlbHBlcnM7CnVzaW5nIFN5c3RlbS5OZXQ7CnVzaW5nIFN5c3RlbS5OZXQuSHR0cDsKdXNpbmcgU3lzdGVtLlRleHQ7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwoKbmFtZXNwYWNlIEF5ZWh1Lk1vb2dzb2Z0CnsKICAgIHB1YmxpYyBjbGFzcyBNR0NyZWF0ZUFsZXJ0IDogSUFjdGl2aXR5QXN5bmMKICAgIHsKCiAgICAgICAgcHVibGljIHN0cmluZyBlbmRQb2ludCA9ICJodHRwczovL3tob3N0bmFtZX0iOwoKICAgICAgICBwcml2YXRlIHN0cmluZyBjb250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uIjsKICAgICAgCiAgICAgICAgcHVibGljIHN0cmluZyB1c2VybmFtZSA9ICIiOwoKICAgICAgICBwdWJsaWMgc3RyaW5nIHBhc3N3b3JkID0gIiI7CgogICAgICAgIHB1YmxpYyBzdHJpbmcgSnNvbmtleXBhdGggPSAiYXV0aF90b2tlbiI7CgogICAgICAgIHByaXZhdGUgaW50IHVyaUJ1aWxkZXJIb3N0UG9ydCA9IDQ0MzsKCiAgICAgICAgcHJpdmF0ZSBib29sIG9taXRKc29uRW1wdHlvck51bGwgPSB0cnVlOwoKICAgICAgICBwcml2YXRlIHN0cmluZyBodHRwTWV0aG9kID0gIkdFVCI7CgogICAgICAgIHByaXZhdGUgc3RyaW5nIHVyaUJ1aWxkZXJQYXRoCiAgICAgICAgewogICAgICAgICAgICBnZXQKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuICIvZ3JhemUvdjEvYXV0aGVudGljYXRlIjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgX3Bvc3REYXRhOwogICAgICAgIHByaXZhdGUgc3RyaW5nIHBvc3REYXRhCiAgICAgICAgewogICAgICAgICAgICBnZXQKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KF9wb3N0RGF0YSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgX3Bvc3REYXRhID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gX3Bvc3REYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aGlzLl9wb3N0RGF0YSA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAgICAgICAgCgogICAgICAgIHByaXZhdGUgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuRGljdGlvbmFyeTxzdHJpbmcsIAogICAgICAgICAgICBzdHJpbmc+IGhlYWRlcnMKICAgICAgICB7CiAgICAgICAgICAgIGdldAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHByaXZhdGUgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4gcXVlcnlTdHJpbmdBcnJheQogICAgICAgIHsKICAgICAgICAgICAgZ2V0CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4oKSB7IHsgInVzZXJuYW1lIiAsIHVzZXJuYW1lIH0sIHsgInBhc3N3b3JkIiwgcGFzc3dvcmQgfSB9OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYXN5bmMgU3lzdGVtLlRocmVhZGluZy5UYXNrcy5UYXNrPElDdXN0b21BY3Rpdml0eVJlc3VsdD4gRXhlY3V0ZSgpCiAgICAgICAgewogICAgICAgICAgCgogICAgICAgICAgICBIdHRwQ2xpZW50IGNsaWVudCA9IG5ldyBIdHRwQ2xpZW50KCk7CiAgICAgICAgICAgIFNlcnZpY2VQb2ludE1hbmFnZXIuRXhwZWN0MTAwQ29udGludWUgPSB0cnVlOwogICAgICAgICAgICBTZXJ2aWNlUG9pbnRNYW5hZ2VyLlNlY3VyaXR5UHJvdG9jb2wgPSBTZWN1cml0eVByb3RvY29sVHlwZS5UbHMxMjsKICAgICAgICAgICAgU2VydmljZVBvaW50TWFuYWdlci5TZXJ2ZXJDZXJ0aWZpY2F0ZVZhbGlkYXRpb25DYWxsYmFjayA9IG5ldyBTeXN0ZW0uTmV0LlNlY3VyaXR5LlJlbW90ZUNlcnRpZmljYXRlVmFsaWRhdGlvbkNhbGxiYWNrKEFjY2VwdEFsbENlcnRpZmljYXRpb25zKTsKICAgICAgICAgICAgVXJpQnVpbGRlciBVcmlCdWlsZGVyID0gbmV3IFVyaUJ1aWxkZXIoZW5kUG9pbnQpOwogICAgICAgICAgICBVcmlCdWlsZGVyLlBhdGggPSB1cmlCdWlsZGVyUGF0aDsKICAgICAgICAgICAgVXJpQnVpbGRlci5RdWVyeSA9IEF5ZWh1SGVscGVyLnF1ZXJ5U3RyaW5nQnVpbGRlcihxdWVyeVN0cmluZ0FycmF5KTsKICAgICAgICAgICAgSHR0cFJlcXVlc3RNZXNzYWdlIG15SHR0cFJlcXVlc3RNZXNzYWdlID0gbmV3IEh0dHBSZXF1ZXN0TWVzc2FnZShuZXcgSHR0cE1ldGhvZChodHRwTWV0aG9kKSwgVXJpQnVpbGRlci5Ub1N0cmluZygpKTsKCiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSA9PSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikKICAgICAgICAgICAgICAgIG15SHR0cFJlcXVlc3RNZXNzYWdlLkNvbnRlbnQgPSBBeWVodUhlbHBlci5mb3JtVXJsRW5jb2RlZENvbnRlbnQocG9zdERhdGEpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHBvc3REYXRhKSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgIGlmIChvbWl0SnNvbkVtcHR5b3JOdWxsKQogICAgICAgICAgICAgICAgICAgIG15SHR0cFJlcXVlc3RNZXNzYWdlLkNvbnRlbnQgPSBuZXcgU3RyaW5nQ29udGVudChBeWVodUhlbHBlci5vbWl0SnNvbkVtcHR5b3JOdWxsKHBvc3REYXRhKSwgRW5jb2RpbmcuVVRGOCwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBteUh0dHBSZXF1ZXN0TWVzc2FnZS5Db250ZW50ID0gbmV3IFN0cmluZ0NvbnRlbnQocG9zdERhdGEsIEVuY29kaW5nLlVURjgsIGNvbnRlbnRUeXBlKTsKCgogICAgICAgICAgICBmb3JlYWNoIChLZXlWYWx1ZVBhaXI8c3RyaW5nLCBzdHJpbmc+IGhlYWRlcml0ZW0gaW4gaGVhZGVycykKICAgICAgICAgICAgICAgIGNsaWVudC5EZWZhdWx0UmVxdWVzdEhlYWRlcnMuQWRkKGhlYWRlcml0ZW0uS2V5LCBoZWFkZXJpdGVtLlZhbHVlKTsKCiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBjbGllbnQuU2VuZEFzeW5jKG15SHR0cFJlcXVlc3RNZXNzYWdlKS5SZXN1bHQ7CgogICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLlN0YXR1c0NvZGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNhc2UgSHR0cFN0YXR1c0NvZGUuTm9Db250ZW50OgogICAgICAgICAgICAgICAgY2FzZSBIdHRwU3RhdHVzQ29kZS5DcmVhdGVkOgogICAgICAgICAgICAgICAgY2FzZSBIdHRwU3RhdHVzQ29kZS5BY2NlcHRlZDoKICAgICAgICAgICAgICAgIGNhc2UgSHR0cFN0YXR1c0NvZGUuT0s6CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpLlJlc3VsdCkgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5HZW5lcmF0ZUFjdGl2aXR5UmVzdWx0KHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKS5SZXN1bHQsIEpzb25rZXlwYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuR2VuZXJhdGVBY3Rpdml0eVJlc3VsdCgiU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpLlJlc3VsdCkgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKS5SZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyZXNwb25zZS5SZWFzb25QaHJhc2UpID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihyZXNwb25zZS5SZWFzb25QaHJhc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKHJlc3BvbnNlLlN0YXR1c0NvZGUuVG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbCBBY2NlcHRBbGxDZXJ0aWZpY2F0aW9ucyhvYmplY3Qgc2VuZGVyLCBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5Llg1MDlDZXJ0aWZpY2F0ZXMuWDUwOUNlcnRpZmljYXRlIGNlcnRpZmljYXRpb24sIFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuWDUwOUNlcnRpZmljYXRlcy5YNTA5Q2hhaW4gY2hhaW4sIFN5c3RlbS5OZXQuU2VjdXJpdHkuU3NsUG9saWN5RXJyb3JzIHNzbFBvbGljeUVycm9ycykKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KfQo=&lt;/SourceCode&gt;
&lt;/Activity&gt;</SourceCode>
  </ActivitySourceMetadata>
</ActivityExportMetadata>